---

---

<div id="openseadragon1" class="size-full"></div>
<script>
	import OpenSeadragon from "openseadragon"

	const viewer = OpenSeadragon({
		id: "openseadragon1",
		prefixUrl: "//openseadragon.github.io/openseadragon/images/",
		tileSources: "/images/logmap.dzi",
		showNavigator: true,
		navigatorPosition: "TOP_LEFT",
		navigationControlAnchor: OpenSeadragon.ControlAnchor.TOP_RIGHT,

		// debugMode: true,
	})

	viewer.addHandler("update-viewport", function () {
		var canvas = viewer.drawer.canvas as HTMLCanvasElement
		var ctx = viewer.drawer.context

		if (!ctx) {
			return
		}

		ctx.strokeStyle = "#fff"
		ctx.lineWidth = 1
		ctx.strokeRect(0, 0, canvas.width, canvas.height)
		ctx.strokeText("Hello, world!", 10, 10)
	})

	viewer.addHandler("canvas-click", (event) => {
		// The canvas-click event gives us a position in web coordinates.
		var webPoint = event.position
		// Convert that to viewport coordinates, the lingua franca of OpenSeadragon coordinates.
		var viewportPoint = viewer.viewport.pointFromPixel(webPoint)
		// Convert from viewport coordinates to image coordinates.
		var imagePoint = viewer.viewport.viewportToImageCoordinates(viewportPoint)
		console.log("canvas-click", webPoint, viewportPoint, imagePoint)
	})
</script>
